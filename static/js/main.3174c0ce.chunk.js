(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(t,e,i){},16:function(t,e,i){"use strict";i.r(e);var s=i(0),a=i.n(s),o=i(8),n=i.n(o),h=(i(15),i(2)),c=i(3),r=i(5),l=i(4),m=i(1),g=i(6),d=function(t){function e(t){var i;return Object(h.a)(this,e),(i=Object(r.a)(this,Object(l.a)(e).call(this,t))).onKeyPress=i.onKeyPress.bind(Object(m.a)(i)),i}return Object(g.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"onKeyPress",value:function(t){switch(t.charCode){case 97:this.props.moveLeft();break;case 119:this.props.moveUp();break;case 100:this.props.moveRight();break;case 115:this.props.moveDown()}}},{key:"render",value:function(){var t=this;return a.a.createElement("canvas",{className:"canvas-class nes-container is-rounded",tabIndex:"0",onKeyPress:this.onKeyPress,width:this.props.width,height:this.props.height,ref:function(e){return e?t.props.contextRef(e.getContext("2d")):null}})}}]),e}(a.a.Component),u=function(t){function e(t){var i;return Object(h.a)(this,e),(i=Object(r.a)(this,Object(l.a)(e).call(this,t))).saveContext=i.saveContext.bind(Object(m.a)(i)),i.moveLeft=i.moveLeft.bind(Object(m.a)(i)),i.moveUp=i.moveUp.bind(Object(m.a)(i)),i.moveDown=i.moveDown.bind(Object(m.a)(i)),i.moveRight=i.moveRight.bind(Object(m.a)(i)),i}return Object(g.a)(e,t),Object(c.a)(e,[{key:"saveContext",value:function(t){this.ctx=t,this.width=this.ctx.canvas.width,this.height=this.ctx.canvas.height}},{key:"createLine",value:function(t,e,i,s){this.ctx.beginPath(),this.ctx.lineWidth="20",this.ctx.strokeStyle="#681313",this.ctx.moveTo(t,e),this.ctx.lineTo(i,s),this.ctx.stroke()}},{key:"createImage",value:function(t,e){var i=this.props,s=i.goRight,a=i.goLeft,o=i.goDown,n=i.goUp,h=this.props,c=h.imageRight,r=h.imageLeft,l=h.imageDown,m=h.imageUp;s&&this.ctx.drawImage(c,t-50,e-35),a&&this.ctx.drawImage(r,t-20,e-35),o&&this.ctx.drawImage(l,t-30,e-50),n&&this.ctx.drawImage(m,t-30,e-20)}},{key:"componentDidUpdate",value:function(){this.ctx.canvas.focus();var t=this.props,e=t.xAxis,i=t.yAxis,s=t.tails,a=t.xCircle,o=t.yCircle,n=t.sheep;this.ctx.save(),this.ctx.clearRect(0,0,this.width,this.height),this.createLine(e,i,s[s.length-1][0],s[s.length-1][1]);for(var h=1;h<s.length;h++)this.createLine(s[s.length-h][0],s[s.length-h][1],s[s.length-(h+1)][0],s[s.length-(h+1)][1]);this.createImage(e,i),this.ctx.drawImage(n,a-16,o-16),this.props.detectImpactWithFood(),this.ctx.restore()}},{key:"moveLeft",value:function(){this.props.moveLeft()}},{key:"moveUp",value:function(){this.props.moveUp()}},{key:"moveDown",value:function(){this.props.moveDown()}},{key:"moveRight",value:function(){this.props.moveRight()}},{key:"onFocus",value:function(){this.ctx.canvas.focus(),console.log("=== element in focus ===")}},{key:"onBlur",value:function(){console.log(">> element blurred >>")}},{key:"render",value:function(){return a.a.createElement(d,{width:this.props.width,height:this.props.height,onFocus:this.onFocus,onBlur:this.onBlur,moveLeft:this.moveLeft,moveUp:this.moveUp,moveDown:this.moveDown,moveRight:this.moveRight,contextRef:this.saveContext})}}]),e}(a.a.Component),p=function(t){function e(t){var i;return Object(h.a)(this,e),(i=Object(r.a)(this,Object(l.a)(e).call(this,t))).size=200,i.width=800,i.height=800,i.state={xAxis:i.size+2,yAxis:i.height/2,xCircle:0,yCircle:0,width:i.width,height:i.height,goRight:!0,goLeft:!1,goDown:!1,goUp:!1,size:i.size,positions:[[0,0]],directions:["right"],tails:[[0,0]],gameOver:!1},i.updateAnimationState=i.updateAnimationState.bind(Object(m.a)(i)),i.moveLeft=i.moveLeft.bind(Object(m.a)(i)),i.moveUp=i.moveUp.bind(Object(m.a)(i)),i.moveDown=i.moveDown.bind(Object(m.a)(i)),i.moveRight=i.moveRight.bind(Object(m.a)(i)),i.stop=i.stop.bind(Object(m.a)(i)),i.start=i.start.bind(Object(m.a)(i)),i.detectImpactWithFood=i.detectImpactWithFood.bind(Object(m.a)(i)),i.restart=i.restart.bind(Object(m.a)(i)),i}return Object(g.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.generateNewFood(),this.rAF=requestAnimationFrame(this.updateAnimationState)}},{key:"updateAnimationState",value:function(){this.state.xAxis<this.state.width-1&&this.state.goRight&&(this.setState(function(t){return{xAxis:t.xAxis+2}}),this.calculateVectors()),this.state.xAxis>1&&this.state.goLeft&&(this.setState(function(t){return{xAxis:t.xAxis-2}}),this.calculateVectors()),this.state.yAxis<this.state.height-1&&this.state.goDown&&(this.setState(function(t){return{yAxis:t.yAxis+2}}),this.calculateVectors()),this.state.yAxis>1&&this.state.goUp&&(this.setState(function(t){return{yAxis:t.yAxis-2}}),this.calculateVectors()),0!==this.state.yAxis&&this.state.yAxis!==this.height&&0!==this.state.xAxis&&this.state.xAxis!==this.width||this.setState({gameOver:!0})}},{key:"generateNewFood",value:function(){var t=Math.floor(Math.random()*this.state.width-2+1),e=Math.floor(Math.random()*this.state.height-2+1);t=t>2?t:2,e=e>2?e:2,this.setState({xCircle:t,yCircle:e})}},{key:"calculateVectors",value:function(){for(var t=[this.state.xAxis,this.state.yAxis],e=[],i=0,s=this.state.size,a=0;s>=0;)if(t[0]===this.state.positions[i][0]){a=0;var o=t[1]-this.state.positions[i][1];o>=s&&"down"===this.state.directions[0]?(e.unshift([t[0],"down"===this.state.directions[0]?t[1]-s:t[1]+s]),a=s,s=-1):Math.abs(o)>=s&&"up"===this.state.directions[0]?(e.unshift([t[0],"up"===this.state.directions[0]?t[1]+s:t[1]-s]),a=s,s=-1):(e.unshift([t[0],this.state.positions[i][1]]),a=s,s-=Math.abs(o),t=this.state.positions[i],i+=1)}else{a=0;var n=t[0]-this.state.positions[i][0];n>=s&&"right"===this.state.directions[0]?(e.unshift(["right"===this.state.directions[0]?t[0]-s:t[0]+s,t[1]]),a=s,s=-1):Math.abs(n)>=s&&"left"===this.state.directions[0]?(e.unshift(["left"===this.state.directions[0]?t[0]+s:t[0]-s,t[1]]),a=s,s=-1):(e.unshift([this.state.positions[i][0],t[1]]),t=this.state.positions[i],a=s,s-=Math.abs(n),i+=1)}if(e[1])switch(this.state.directions[e.length-1]){case"right":e[0][0]=e[1][0]-a;break;case"left":e[0][0]=e[1][0]+a;break;case"down":e[0][1]=e[1][1]-a;break;case"up":e[0][1]=e[1][1]+a}var h=this.state.positions.slice();h.slice(0,i+1),this.setState({tails:e,positions:h}),this.rAF=requestAnimationFrame(this.updateAnimationState)}},{key:"moveLeft",value:function(){if("right"!==this.state.directions[0]&&"left"!==this.state.directions[0]){var t=this.state.positions.slice(0,15),e=this.state.directions.slice(0,15);t.unshift([this.state.xAxis,this.state.yAxis]),e.unshift("left"),this.setState({goRight:!1,goLeft:!0,goDown:!1,goUp:!1,positions:t,directions:e}),this.state.xAxis!==this.state.width||this.state.goLeft||this.setState({goRight:!1,goLeft:!0,goDown:!1,goUp:!1,positions:t,directions:e})}}},{key:"moveUp",value:function(){if("down"!==this.state.directions[0]&&"up"!==this.state.directions[0]){var t=this.state.positions.slice(0,15),e=this.state.directions.slice(0,15);t.unshift([this.state.xAxis,this.state.yAxis]),e.unshift("up"),this.setState({goRight:!1,goLeft:!1,goDown:!1,goUp:!0,positions:t,directions:e}),this.state.yAxis!==this.state.height||this.state.goUp||this.setState({goRight:!1,goLeft:!1,goDown:!1,goUp:!0,positions:t,directions:e})}}},{key:"moveDown",value:function(){if("up"!==this.state.directions[0]&&"down"!==this.state.directions[0]){var t=this.state.positions.slice(0,15),e=this.state.directions.slice(0,15);t.unshift([this.state.xAxis,this.state.yAxis]),e.unshift("down"),this.setState({goRight:!1,goLeft:!1,goDown:!0,goUp:!1,positions:t,directions:e}),0!==this.state.yAxis||this.state.goDown||this.setState({goRight:!1,goLeft:!1,goDown:!0,goUp:!1,positions:t,directions:e})}}},{key:"moveRight",value:function(){if("left"!==this.state.directions[0]&&"right"!==this.state.directions[0]){var t=this.state.positions.slice(0,15),e=this.state.directions.slice(0,15);t.unshift([this.state.xAxis,this.state.yAxis]),e.unshift("right"),this.setState({goRight:!0,goLeft:!1,goDown:!1,goUp:!1,positions:t,directions:e}),0!==this.state.xAxis||this.state.goRight||this.setState({goRight:!0,goLeft:!1,goDown:!1,goUp:!1,positions:t,directions:e})}}},{key:"detectImpactWithFood",value:function(){var t=this.state.xCircle,e=this.state.yCircle;this.state.xAxis>=t-16&&this.state.xAxis<=t+16&&this.state.yAxis>=e-16&&this.state.yAxis<=e+16&&(this.generateNewFood(),this.setState({size:this.state.size+10}))}},{key:"restart",value:function(){var t=Math.floor(Math.random()*this.state.width-2+1),e=Math.floor(Math.random()*this.state.height-2+1);t=t>2?t:2,e=e>2?e:2,this.setState({xAxis:this.size+2,yAxis:this.width/2,xCircle:t,yCircle:e,width:this.width,height:this.height,goRight:!0,goLeft:!1,goDown:!1,goUp:!1,size:this.size,positions:[[0,0]],directions:["right"],tails:[[0,0]],gameOver:!1}),this.rAF=requestAnimationFrame(this.updateAnimationState)}},{key:"stop",value:function(){cancelAnimationFrame(this.rAF)}},{key:"start",value:function(){this.rAF=requestAnimationFrame(this.updateAnimationState)}},{key:"render",value:function(){return a.a.createElement("div",{className:"container-fluid"},a.a.createElement("div",{className:"row d-flex justify-content-center game"},a.a.createElement("div",{className:"col-sm-2 score"},a.a.createElement("div",null,a.a.createElement("a",{href:"#",className:"nes-badge is-splited"},a.a.createElement("span",{className:"is-dark"},"Score"),a.a.createElement("span",{className:"is-success"},this.state.size-this.size))),a.a.createElement("div",{className:"controlls-container"},a.a.createElement("div",{class:"nes-container with-title is-centered"},a.a.createElement("p",{class:"title"},"Instructions"),a.a.createElement("img",{ref:"wasd",src:"/drogons/img/wasd2.png",alt:"wasd",className:""}),a.a.createElement("br",null),a.a.createElement("br",null),a.a.createElement("div",null,"W - move up"),a.a.createElement("div",null,"A - move left"),a.a.createElement("div",null,"S - move down"),a.a.createElement("div",null,"D - move right")))),a.a.createElement("div",{className:"col-sm nes-container is-rounded canvas-outerborder"},a.a.createElement(u,{width:this.state.width,height:this.state.height,moveLeft:this.moveLeft,moveUp:this.moveUp,moveDown:this.moveDown,moveRight:this.moveRight,xAxis:this.state.xAxis,yAxis:this.state.yAxis,xCircle:this.state.xCircle,yCircle:this.state.yCircle,goRight:this.state.goRight,goLeft:this.state.goLeft,goDown:this.state.goDown,goUp:this.state.goUp,size:this.state.size,tails:this.state.tails,imageRight:this.refs.imageRight,imageLeft:this.refs.imageLeft,imageDown:this.refs.imageDown,imageUp:this.refs.imageUp,sheep:this.refs.sheep,detectImpactWithFood:this.detectImpactWithFood})),a.a.createElement("div",{className:"col-sm button-container"},a.a.createElement("ul",{className:""},a.a.createElement("li",{className:"nes-pointer"},a.a.createElement("a",{className:"nes-btn nes-pointer",onClick:this.stop},"Stop !!!")),this.state.gameOver&&a.a.createElement("li",{className:"nes-pointer"},a.a.createElement("a",{className:"nes-btn nes-pointer",onClick:this.restart},"Restart")),a.a.createElement("li",{className:"nes-pointer"},a.a.createElement("a",{className:"nes-btn nes-pointer",onClick:this.start},"Start"))))),a.a.createElement("img",{ref:"imageRight",src:"/drogons/img/head_right.png",alt:"head_right",className:"hidden"}),a.a.createElement("img",{ref:"imageLeft",src:"/drogons/img/head_left.png",alt:"head_left",className:"hidden"}),a.a.createElement("img",{ref:"imageDown",src:"/drogons/img/head_down.png",alt:"head_down",className:"hidden"}),a.a.createElement("img",{ref:"imageUp",src:"/drogons/img/head_up.png",alt:"head_up",className:"hidden"}),a.a.createElement("img",{ref:"sheep",src:"/drogons/img/sheep.png",alt:"head_up",className:"hidden"}),a.a.createElement("img",{ref:"wasd",src:"/drogons/img/wasd2.png",alt:"wasd",className:"hidden"}))}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rAF)}}]),e}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(a.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},9:function(t,e,i){t.exports=i(16)}},[[9,1,2]]]);
//# sourceMappingURL=main.3174c0ce.chunk.js.map